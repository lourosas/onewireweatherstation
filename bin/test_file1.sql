DROP TABLE IF EXISTS HAS_DATA;
DROP TABLE IF EXISTS TEMPERATUREDATA;
DROP TABLE IF EXISTS MISSIONDATA;

CREATE TABLE MISSIONDATA(
   THEDATE CHAR(20),
   PRIMARY KEY(THEDATE)
);

CREATE TABLE TEMPERATUREDATA(
   THEDATE CHAR(20),
   THETIME CHAR(20),
   TEMPC   DECIMAL(5,2),
   TEMPF   DECIMAL(5,2),
   TEMPK   DECIMAL(5,2),
   PRIMARY KEY(THEDATE, THETIME),
   FOREIGN KEY(THEDATE) REFERENCES MISSIONDATA(THEDATE)
      ON DELETE CASCADE
);

CREATE INDEX IX_SOME_DATE ON MISSIONDATA(THEDATE);
CREATE INDEX IX_SOME_TIME ON TEMPERATUREDATA(THETIME);

CREATE TABLE HAS_DATA(
   THEDATE CHAR(20),
   THETIME CHAR(20),
   PRIMARY KEY(THEDATE, THETIME),
   FOREIGN KEY(THEDATE) REFERENCES MISSIONDATA(THEDATE)
      ON DELETE CASCADE,
   FOREIGN KEY(THETIME) REFERENCES TEMPERATUREDATA(THETIME)
      ON DELETE CASCADE
)ENGINE=INNODB;
